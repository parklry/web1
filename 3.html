<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <select id="selectA" name="selectA">
        <option value="">-선택-</option>
    </select>
    <select id="selectB" name="selectB">
        <option value="">-선택-</option>
    </select>
    <select id="selectC" name="selectC"></select>

    <script>
        $(document).ready(function() {
            var jsonData = [
                {"A_C":"01","A_N":"A01","B_C":"01","B_N":"B01","C_C":"01","C_N":"C01"},
                {"A_C":"01","A_N":"A01","B_C":"01","B_N":"B01","C_C":"02","C_N":"C02"},
                {"A_C":"01","A_N":"A01","B_C":"02","B_N":"B02","C_C":"01","C_N":"C01"},
                {"A_C":"01","A_N":"A01","B_C":"02","B_N":"B02","C_C":"02","C_N":"C02"},
                {"A_C":"02","A_N":"A02","B_C":"01","B_N":"B01","C_C":"01","C_N":"C01"},
                {"A_C":"02","A_N":"A02","B_C":"01","B_N":"B01","C_C":"02","C_N":"C02"},
                {"A_C":"02","A_N":"A02","B_C":"02","B_N":"B02","C_C":"01","C_N":"C01"},
                {"A_C":"02","A_N":"A02","B_C":"02","B_N":"B02","C_C":"02","C_N":"C02"}
            ];

            var selectA = $('#selectA');
            var selectB = $('#selectB');

            // selectA 구성
            $.each(jsonData, function(index, item) {
                if ($.inArray(item.A_C, selectA.find('option').map(function() { return $(this).val(); }).get()) === -1) {
                    selectA.append($('<option></option>').val(item.A_C).text(item.A_N));
                }
            });

            // selectA 변경 이벤트 처리
            selectA.change(function() {
                var selectedA = $(this).val();
                var uniqueValuesB = [];
                
                // 선택된 A_C 값에 해당하는 B_C 값 중복 없이 가져오기
                $.each(jsonData, function(index, item) {
                    if (item.A_C === selectedA && $.inArray(item.B_C, uniqueValuesB) === -1) {
                        uniqueValuesB.push(item.B_C);
                    }
                });

                selectB.empty();
                selectB.append($('<option></option>').val('').text('-선택-'));

                // selectB에 옵션 추가
                $.each(uniqueValuesB, function(index, value) {
                    // B_N 값을 텍스트로 사용
                    var bName = jsonData.find(function(item) {
                        return item.B_C === value;
                    }).B_N;

                    selectB.append($('<option></option>').val(value).text(bName));
                });
            });
        });
    </script>
</body>
</html>
