<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <select id="selectA" name="selectA">
        <option value="">-선택-</option>
    </select>
    <select id="selectB" name="selectB">
        <option value="">-선택-</option>
    </select>
    <select id="selectC" name="selectC">
        <option value="">-선택-</option>
    </select>

    <script>
        $(document).ready(function() {
            var jsonData = [
                {"A_C":"01","A_N":"A01","B_C":"01","B_N":"B01","C_C":"01","C_N":"C01"},
                {"A_C":"01","A_N":"A01","B_C":"01","B_N":"B01","C_C":"02","C_N":"C02"},
                {"A_C":"01","A_N":"A01","B_C":"02","B_N":"B02","C_C":"01","C_N":"C03"},
                {"A_C":"01","A_N":"A01","B_C":"02","B_N":"B02","C_C":"02","C_N":"C04"},
                {"A_C":"02","A_N":"A02","B_C":"01","B_N":"B03","C_C":"01","C_N":"C05"},
                {"A_C":"02","A_N":"A02","B_C":"01","B_N":"B03","C_C":"02","C_N":"C06"},
                {"A_C":"02","A_N":"A02","B_C":"02","B_N":"B04","C_C":"01","C_N":"C07"},
                {"A_C":"02","A_N":"A02","B_C":"02","B_N":"B04","C_C":"02","C_N":"C08"}
            ];

            var selectA = $('#selectA');
            var selectB = $('#selectB');
            var selectC = $('#selectC');

            // selectA 구성
            $.each(jsonData, function(index, item) {
                if ($.inArray(item.A_C, selectA.find('option').map(function() { return $(this).val(); }).get()) === -1) {
                    selectA.append($('<option></option>').val(item.A_C).text(item.A_N));
                }
            });

            // selectA 변경 이벤트 처리
            selectA.change(function() {
                var selectedA = $(this).val();
                var selectedB = selectB.val();
                populateSelectC(selectedA, selectedB);
            });

            // selectB 변경 이벤트 처리
            selectB.change(function() {
                var selectedA = selectA.val();
                var selectedB = $(this).val();
                populateSelectC(selectedA, selectedB);
            });

            function populateSelectC(selectedA, selectedB) {
                var uniqueValuesC = [];

                // 선택된 A_C, B_C 값에 해당하는 C_C 값 중복 없이 가져오기
                $.each(jsonData, function(index, item) {
                    if (item.A_C === selectedA && item.B_C === selectedB && $.inArray(item.C_C, uniqueValuesC) === -1) {
                        uniqueValuesC.push(item.C_C);
                    }
                });

                selectC.empty();
                selectC.append($('<option></option>').val('').text('-선택-'));

                // selectC에 옵션 추가
                $.each(uniqueValuesC, function(index, value) {
                    // C_N 값을 텍스트로 사용
                    var cName = jsonData.find(function(item) {
                        return item.C_C === value;
                    }).C_N;

                    selectC.append($('<option></option>').val(value).text(cName));
                });
            }
        });
    </script>
</body>
</html>
